webpackJsonp([0],{121:function(t,n,e){n=t.exports=e(122)(),n.push([t.i,'html, body {\n  height: 100%;\n  font-family: url("https://fonts.googleapis.com/css?family=Catamaran:100,200,300,900"); }\n  html a, body a {\n    cursor: pointer !important;\n    color: white !important; }\n\n.nav-custom {\n  background: #f69918;\n  border: #f69918 1px solid;\n  color: white;\n  font-weight: 900; }\n\n.title-msg {\n  font-weight: 900;\n  font-size: 30px; }\n\n.warning {\n  color: red; }\n\n.center {\n  text-align: center; }\n\n.btn-cutom {\n  font-weight: 900;\n  font-size: 25px; }\n\n.active {\n  text-decoration: line-through; }\n\n.random-color {\n  color: white;\n  background-color: rgba(221, 133, 112, 0.47); }\n\n.msg-flow {\n  overflow-y: scroll;\n  max-height: 60vh; }\n\n/*custom list*/\n.list-custom {\n  padding-left: 0px; }\n  .list-custom li {\n    border: none; }\n    .list-custom li .avatar {\n      display: inline-block;\n      height: 50px;\n      width: 50px;\n      font-size: 30px;\n      text-align: center;\n      border-radius: 25px;\n      font-weight: 900;\n      vertical-align: middle; }\n    .list-custom li .server-avatar {\n      background: #f69918; }\n    .list-custom li .msg-content {\n      display: inline-block;\n      vertical-align: middle;\n      margin-left: 20px;\n      min-width: 60%; }\n      .list-custom li .msg-content span {\n        display: block; }\n    .list-custom li .name {\n      font-weight: 900;\n      font-size: 20px; }\n    .list-custom li .msg {\n      font-weight: 200; }\n    .list-custom li .inline {\n      display: inline-block; }\n    .list-custom li .green {\n      color: green; }\n  .list-custom .right {\n    background: #fff7ed;\n    text-align: right; }\n    .list-custom .right .avatar {\n      /*color: rgb($red1, $green1, $blue1);*/\n      background-color: rgba(29, 192, 175, 0.47);\n      margin-left: 20px;\n      float: right; }\n\n/*responsive field*/\n.msg-filed {\n  min-height: 88vh; }\n  .msg-filed .msg-frame {\n    min-height: 75vh; }\n    .msg-filed .msg-frame .msg-content {\n      max-height: 614px !important; }\n\n.inputbox {\n  position: absolute;\n  bottom: 0; }\n',""])},122:function(t,n){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],n=0;n<this.length;n++){var e=this[n];e[2]?t.push("@media "+e[2]+"{"+e[1]+"}"):t.push(e[1])}return t.join("")},t.i=function(n,e){"string"==typeof n&&(n=[[null,n,""]]);for(var s={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(s[r]=!0)}for(i=0;i<n.length;i++){var o=n[i];"number"==typeof o[0]&&s[o[0]]||(e&&!o[2]?o[2]=e:e&&(o[2]="("+o[2]+") and ("+e+")"),t.push(o))}},t}},149:function(t,n){t.exports='<div class="container">\n  <div class="row">\n    <div class="col col-md-12" >\n      <div class="row msg-filed">\n         <div class="msg-flow msg-frame" scroll-glue>\n            <div ng-if="chatVm.msgCollection.length < 1"\n                 class="warning title-msg">\n              Please check the server side connection\n            </div>\n            <ul class="list-group list-custom msg-content" ng-repeat="msg in chatVm.msgCollection track by $index">\n              <div ng-if="msg.from === undefined || !msg.from" class="title-msg">\n               {{msg}}\n              </div>\n              <li class="list-group-item container-fluid" \n                  ng-if="$index !== 0"\n                  ng-class="{ right: msg.from === chatVm.nickName}" >\n                <div class="random-color avatar" ng-class="{\'server-avatar\': msg.from[0]=== \'_\'}">\n                  {{msg.from[0]!== \'_\'? msg.from[0]: msg.from[1]}}\n                </div>\n                <div class="msg-content">\n                  <span class="name">\n                    {{msg.from}}\n                  </span>\n                  <span class="msg">\n                    {{msg.message}}\n                  </span>\n                </div>\n              </li>\n            </ul>\n        </div>\n        <textarea\n            class="form-control inputbox"\n            id="exampleTextarea" \n            rows="3" \n            ng-enter="chatVm.sendGeneralMsg(chatVm.instantMsg)" \n            ng-model="chatVm.instantMsg" \n            placeholder="Put your Message here, press ENTER to send" \n            autocomplete-angular-expression></textarea>\n      </div>\n    </div>\n  </div>\n</div>\n\n'},150:function(t,n){t.exports='<div class="container">\n\t<div class="row">\n\t\t<div  class="col col-md-12">\n\t\t    <div class="title-msg" ng-show="historyVm.chatHistoryList.length < 1">\n\t\t    \tThere is no History to show, press refresh button to see if you can load more.\n\t\t    </div>\n\t\t    <div ng-show="historyVm.errorMsg">\n\t\t    \t{{historyVm.errorMsg}}\n\t\t    </div>\n\t\t\t<ul class="list-group list-custom" \n\t\t\t\tng-repeat= \'history in historyVm.chatHistoryList track by $index\'\n\t\t\t\tng-hide="historyVm.errorMsg">\n\t\t  \t\t<li class="list-group-item">\n\t\t  \t\t\t<div class="avatar" style="background-color:{{historyVm.avatarColorSet[history.from]}}">\n\t\t  \t\t\t\t{{history.from[0]!== \'_\'? history.from[0]: history.from[1]}}\n\t\t  \t\t\t</div>\n\t\t  \t\t\t<div class="msg-content">\n\t\t\t\t\t\t\t<div class="name">\n\t\t\t\t\t\t\t\t{{history.from}} \n\t\t  \t\t\t\t</div>\n\t\t  \t\t\t\t<p>{{history.timestamp | date:\'medium\'}}<p>\n\t\t  \t\t\t\t<span class="message">\n\t\t  \t\t\t\t\t{{history.message || history.msg }}\n\t\t  \t\t\t\t</span>\n\t\t  \t\t\t</div>\n\t\t  \t\t</li>\n\t\t  \t</ul>\n\t\t  \t<div class="center">\n\t\t  \t\t<button ng-click="historyVm.chatHistory()" class="btn btn-warning btn-cutom">\n\t\t\t\t \tRefresh\n\t\t\t\t</button>\n\t\t  \t</div>\n\t\t</div>\n\t</div>\t\t\n</div>'},151:function(t,n){t.exports='<nav class="navbar navbar-default nav-custom">\n\t<div class="container-fluid">\n\t  <div class="navbar-header">\n\t    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">\n\t      <span class="sr-only">Toggle navigation</span>\n\t      <span class="icon-bar"></span>\n\t      <span class="icon-bar"></span>\n\t      <span class="icon-bar"></span>\n\t    </button>\n\t    <a class="navbar-brand"  ng-click="mainVm.handleTab(\'Chatting\')">Chatting room</a>\n\t  </div>\n\t  <div id="navbar" class="navbar-collapse collapse navbar-center">\n\t    <ul class="nav navbar-nav">\n\t      <li><a ng-click="mainVm.handleTab(\'Chatting\')" \n\t      \t\tng-class="{\'active\': mainVm.currentTab === \'Chatting\'}">\n\t      \t\tChatting\n\t      </a></li>\n\t      <li><a ng-click="mainVm.handleTab(\'History\')"\n\t      \t\t ng-class="{\'active\': mainVm.currentTab === \'History\'}">\n\t     \t History\n\t      </a></li>\n\t      <li><a ng-click="mainVm.handleTab(\'UserStatus\')"\n\t      \t\t ng-class="{\'active\': mainVm.currentTab === \'UserStatus\'}">\n\t      \tUserStatus\n\t      \t</a></li>\n\t    </ul>\n\t  </div><!--/.nav-collapse -->\n\t</div><!--/.container-fluid -->\n</nav>\n\n<div class="container-fluid">\n\t<chat-cmp ng-show="mainVm.currentTab === \'Chatting\'" style="height:100%;"></chat-cmp>\n\t<history-cmp ng-if="mainVm.currentTab === \'History\'"></history-cmp>\n\t<user-cmp ng-if="mainVm.currentTab === \'UserStatus\'"></user-cmp>\n</div>'},152:function(t,n){t.exports='<div class="container">\n\t<div class="row">\n\t\t<div class="col col-md-12">\n\t\t<!-- if userStatus get load -->\n\t\t\t<div ng-show="!userVm.userStatusList" class="title-msg">\n\t\t\t\tThere is no data to show, try to click button below see who is online\n\t\t\t</div>\n\t\t\t<!-- show userStatus no matter is error -->\n\t\t\t<div ng-show="userVm.userStatusList">\n\t\t\t\t<div class="title-msg">\n\t\t\t\t\tpress `refresh` to reload the list :)\n\t\t\t\t</div>\n\t\t\t\t<div ng-show="userVm.userStatusList.errors !== null" \n\t\t\t\t\t class="warning title-msg">\n\t\t\t\t\t{{userVm.userStatusList.errors}}\n\t\t\t\t</div>\n\t\t\t\t<div ng-show="userVm.userStatusList.errors === null">\n\t\t\t\t\t<ul ng-repeat="item in userVm.userStatusList.data" class="list-group list-custom">\n\t\t\t\t\t\t<li class="list-group-item">\n\t\t\t\t\t\t\t<div class="name inline">\n\t\t\t\t\t\t\t\t{{item.nick}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="msg inline" ng-class="{green: item.online}">\n\t\t\t\t\t\t\t\t{{item.online ? \'online\':\'offline\'}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<button ng-click="userVm.userStatus()" type="button" class="btn btn-warning btn-cutom">\n\t\t\t  Refresh\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</div>\n'},159:function(t,n,e){"use strict";n.__esModule=!0;var s=e(12),i=function(){function t(t,n){this.$http=t,this.chatService=n,this.msgCollection=[],this.instantMsg="",this.nickName="",this._init()}return t.$inject=["$http","chatService"],t.prototype._init=function(){this.msgCollection=this.chatService.getMsg()},t.prototype._sendNickMsg=function(t){this.chatService.sendMsg(t),this.nickName=t.replace("/nick ","")},t.prototype._sendInstatMsg=function(t){if(!this.nickName)return void this.msgCollection.push({from:"error",message:"please set the nick name by command /nick nickname before chatting away"});var n={from:this.nickName,message:t};this.chatService.sendMsg(s.toJson(n)),this.msgCollection.push(n)},t.prototype.sendGeneralMsg=function(t){"/"===t[0]?this._sendNickMsg(t):this._sendInstatMsg(t),this.instantMsg=""},t}();n.chatCmp={template:e(149),controller:i,controllerAs:"chatVm"}},160:function(t,n,e){"use strict";n.__esModule=!0;var s=function(){function t(t,n){this.User=t,this.$window=n,this.chatHistoryList=[],this.avatarColorSet={},this.chatHistory()}return t.$inject=["User","$window"],t.prototype.chatHistory=function(){var t=this;this.chatHistoryList=[],this.User.getChatHistory().then(function(n){return null!==n.errors?void(t.errorMsg=n.error):(n.data.forEach(function(n){if("_server"!==n.from){var e=JSON.parse(n.msg);t.chatHistoryList.push({timestamp:n.timestamp,from:e.from,message:e.message})}else t.chatHistoryList.push(n)}),void t._colorPicker())}).catch(function(n){t.$window.alert("No connection establish")})},t.prototype._colorPicker=function(){var t=this,n=this.chatHistoryList.map(function(t){return t.from}).filter(function(t,n,e){return e.indexOf(t)===n});n.forEach(function(n){t.avatarColorSet[n]="#"+Math.random().toString(16).slice(2,8).toUpperCase()})},t}();n.historyCmp={template:e(150),controller:s,controllerAs:"historyVm"}},161:function(t,n,e){"use strict";n.__esModule=!0;var s=function(){function t(t,n){this.User=t,this.$window=n,this.userStatusList={},this.userStatus()}return t.$inject=["User","$window"],t.prototype.userStatus=function(){var t=this;this.User.getUserStatus().then(function(n){t.userStatusList=n}).catch(function(n){t.$window.alert("No connection establish")})},t}();n.UserCtrl=s,n.userCmp={template:e(152),controller:s,controllerAs:"userVm"}},192:function(t,n){function e(t,n){for(var e=0;e<t.length;e++){var s=t[e],i=f[s.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](s.parts[r]);for(;r<s.parts.length;r++)i.parts.push(c(s.parts[r],n))}else{for(var o=[],r=0;r<s.parts.length;r++)o.push(c(s.parts[r],n));f[s.id]={id:s.id,refs:1,parts:o}}}}function s(t){for(var n=[],e={},s=0;s<t.length;s++){var i=t[s],r=i[0],o=i[1],a=i[2],c=i[3],l={css:o,media:a,sourceMap:c};e[r]?e[r].parts.push(l):n.push(e[r]={id:r,parts:[l]})}return n}function i(t,n){var e=g(),s=b[b.length-1];if("top"===t.insertAt)s?s.nextSibling?e.insertBefore(n,s.nextSibling):e.appendChild(n):e.insertBefore(n,e.firstChild),b.push(n);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");e.appendChild(n)}}function r(t){t.parentNode.removeChild(t);var n=b.indexOf(t);n>=0&&b.splice(n,1)}function o(t){var n=document.createElement("style");return n.type="text/css",i(t,n),n}function a(t){var n=document.createElement("link");return n.rel="stylesheet",i(t,n),n}function c(t,n){var e,s,i;if(n.singleton){var c=v++;e=p||(p=o(n)),s=l.bind(null,e,c,!1),i=l.bind(null,e,c,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(e=a(n),s=h.bind(null,e),i=function(){r(e),e.href&&URL.revokeObjectURL(e.href)}):(e=o(n),s=u.bind(null,e),i=function(){r(e)});return s(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;s(t=n)}else i()}}function l(t,n,e,s){var i=e?"":s.css;if(t.styleSheet)t.styleSheet.cssText=y(n,i);else{var r=document.createTextNode(i),o=t.childNodes;o[n]&&t.removeChild(o[n]),o.length?t.insertBefore(r,o[n]):t.appendChild(r)}}function u(t,n){var e=n.css,s=n.media;if(s&&t.setAttribute("media",s),t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}function h(t,n){var e=n.css,s=n.sourceMap;s&&(e+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */");var i=new Blob([e],{type:"text/css"}),r=t.href;t.href=URL.createObjectURL(i),r&&URL.revokeObjectURL(r)}var f={},d=function(t){var n;return function(){return"undefined"==typeof n&&(n=t.apply(this,arguments)),n}},m=d(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),g=d(function(){return document.head||document.getElementsByTagName("head")[0]}),p=null,v=0,b=[];t.exports=function(t,n){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");n=n||{},"undefined"==typeof n.singleton&&(n.singleton=m()),"undefined"==typeof n.insertAt&&(n.insertAt="bottom");var i=s(t);return e(i,n),function(t){for(var r=[],o=0;o<i.length;o++){var a=i[o],c=f[a.id];c.refs--,r.push(c)}if(t){var l=s(t);e(l,n)}for(var o=0;o<r.length;o++){var c=r[o];if(0===c.refs){for(var u=0;u<c.parts.length;u++)c.parts[u]();delete f[c.id]}}}};var y=function(){var t=[];return function(n,e){return t[n]=e,t.filter(Boolean).join("\n")}}()},211:function(t,n,e){"use strict";n.__esModule=!0;var s=e(12),i=e(89);e(29),e(30),e(87);var r=e(93),o=e(90),a=e(91),c=e(92),l=e(88);e(94),s.module("app",[i.mainModule,"ui.router","ngWebSocket","luegg.directives"]).config(r.default).service("chatService",a.chatService).service("User",c.User).component("app",o.main).directive("ngEnter",l.ngEnter)},87:function(t,n){"object"==typeof t&&t.exports&&(t.exports="luegg.directives"),function(t,n){"use strict";function e(t,e,s){function i(t){var n=t;return{getValue:function(){return n},setValue:function(t){n=t}}}function r(t,n){return{getValue:function(){return t(n)},setValue:function(){}}}function o(t,n,e){return{getValue:function(){return t(e)},setValue:function(s){s!==t(e)&&e.$apply(function(){n(e,s)})}}}if(""!==e){var a=t(e);return a.assign!==n?o(a,a.assign,s):r(a,s)}return i(!0)}function s(n,s,i){n.directive(s,["$parse","$window","$timeout",function(n,r,o){return{priority:1,restrict:"A",link:function(a,c,l){function u(){d.getValue()&&!i.isAttached(f)&&o(function(){i.scroll(f)})}function h(){d.setValue(i.isAttached(f))}var f=c[0],d=e(n,l[s],a);o(u,0,!1),c[0].hasAttribute("force-glue")||c.on("scroll",h);var m=!1;t.forEach(c.children(),function(t){t.hasAttribute("scroll-glue-anchor")&&(m=!0,a.$watch(function(){return t.offsetHeight},function(){u()}))}),m||(a.$watch(u),r.addEventListener("resize",u,!1)),c.on("$destroy",function(){c.unbind("scroll",h)}),a.$on("$destroy",function(){r.removeEventListener("resize",u,!1)})}}}])}var i={isAttached:function(t){return t.scrollTop+t.clientHeight+1>=t.scrollHeight},scroll:function(t){t.scrollTop=t.scrollHeight}},r={isAttached:function(t){return t.scrollTop<=1},scroll:function(t){t.scrollTop=0}},o={isAttached:function(t){return t.scrollLeft+t.clientWidth+1>=t.scrollWidth},scroll:function(t){t.scrollLeft=t.scrollWidth}},a={isAttached:function(t){return t.scrollLeft<=1},scroll:function(t){t.scrollLeft=0}},c=t.module("luegg.directives",[]);s(c,"scrollGlue",i),s(c,"scrollGlueTop",r),s(c,"scrollGlueBottom",i),s(c,"scrollGlueLeft",a),s(c,"scrollGlueRight",o)}(angular)},88:function(t,n){"use strict";function e(){return function(t,n,e){n.bind("keydown",function(n){13===n.which&&(t.$apply(function(){t.$eval(e.ngEnter,{e:n})}),n.preventDefault())})}}n.__esModule=!0,n.ngEnter=e},89:function(t,n,e){"use strict";n.__esModule=!0;var s=e(12),i=e(159),r=e(160),o=e(161);n.mainModule="mainCtrl",s.module(n.mainModule,[]).component("chatCmp",i.chatCmp).component("historyCmp",r.historyCmp).component("userCmp",o.userCmp)},90:function(t,n,e){"use strict";n.__esModule=!0;var s=function(){function t(){this.currentTab="Chatting"}return t.prototype.handleTab=function(t){this.currentTab=t},t}();n.main={template:e(151),controller:s,controllerAs:"mainVm"}},91:function(t,n){"use strict";n.__esModule=!0;var e=function(){function t(t){this.$websocket=t,this.dataStream=t("ws://127.0.0.1:8888")}return t.$inject=["$websocket"],t.prototype.getMsg=function(){var t=[];return this.dataStream.onMessage(function(n){var e=n.data;t.length>0&&(e=JSON.parse(n.data),"_server"!==e.from&&(e=JSON.parse(e.message))),t.push(e)}),t},t.prototype.sendMsg=function(t){this.dataStream.send(t)},t}();n.chatService=e},92:function(t,n){"use strict";n.__esModule=!0;var e=function(){function t(t){this.$http=t,this.url="http://127.0.0.1:8888"}return t.$inject=["$http"],t.prototype.getUserStatus=function(){return this.$http.get(this.url+"/users").then(function(t){return t.data})},t.prototype.getChatHistory=function(){return this.$http.get(this.url+"/history").then(function(t){return t.data})},t}();n.User=e},93:function(t,n){"use strict";function e(t,n,e){e.html5Mode(!0).hashPrefix("!"),n.otherwise("/"),t.state("app",{url:"/",component:"app"})}e.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],n.__esModule=!0,n.default=e},94:function(t,n,e){var s=e(121);"string"==typeof s&&(s=[[t.i,s,""]]);e(192)(s,{});s.locals&&(t.exports=s.locals)}},[211]);